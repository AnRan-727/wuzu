<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<script th:src="@{/js/jquery-1.12.4.js}"></script>
<script th:src="@{/layui/layui.js}"></script>
<title>Title</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}"  media="all">
</head>
<body>
<div style="align-content: center;">
    <form action="/item/queryByItem_sheet" id="form">
        <div id="chanpin1">
            <table class="layui-table"  border="1 solid black" cellspacing="0" width="100%" align="center">
                <tr>
                    <td align="right"><span>项目代码:</span></td>
                    <td>
                        <input type="text" th:if="${item_sheet != null}"  th:value="${item_sheet.Projectcode}" name="Projectcode" placeholder="输入文本" autocomplete="off" class="layui-input">
                        <input type="text" th:if="${item_sheet == null}" name="Projectcode" placeholder="输入文本" autocomplete="off" class="layui-input">
                    </td>
                    <td align="right"><span>项目名称:</span></td>
                    <td>
                        <input type="text" th:if="${item_sheet != null}"  th:value="${item_sheet.Entryname}" name="Entryname" placeholder="输入文本" autocomplete="off" class="layui-input">
                        <input type="text" th:if="${item_sheet == null}" name="Entryname"  placeholder="输入文本" autocomplete="off" class="layui-input">
                    </td>
                    <td align="right"><span>产品分类:</span></td>
                    <td>
                        <select th:if="${pct!=null}" class="layui-select" name="ProductClassificationID">
                            <option value="">--请选择--</option>
                            <option th:each="pt:${product_type}" th:selected="${pct.ProductClassificationID} eq ${pt.ProductClassificationID}" th:value="${pt.ProductClassificationID}" th:text="${pt.ProductClassificationName}"></option>
                        </select>
                        <select th:if="${pct==null}" class="layui-select" name="ProductClassificationID">
                            <option value="">--请选择--</option>
                            <option th:each="pt:${product_type}" th:value="${pt.ProductClassificationID}" th:text="${pt.ProductClassificationName}"></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td align="right"><span>项目类型:</span></td>
                    <td>
                        <select th:if="${itt!=null}" class="layui-select" name="ItemTypeID">
                            <option value="">--请选择--</option>
                            <option th:each="itemtt:${item_type}" th:selected="${itt.ItemTypeID} eq ${itemtt.ItemTypeID}" th:value="${itemtt.ItemTypeID}" th:text="${itemtt.ItemTypeName}"></option>
                        </select>
                        <select th:if="${itt==null}" class="layui-select" name="ItemTypeID">
                            <option value="">--请选择--</option>
                            <option th:each="itemtt:${item_type}" th:value="${itemtt.ItemTypeID}" th:text="${itemtt.ItemTypeName}"></option>
                        </select>
                    </td>
                    <td><label class="layui-form-label">成立日期:</label></td>
                    <td >
                        <div class="layui-inline">
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" th:if="${item_sheet != null}" th:value="${item_sheet.Dateofestablishment}" name="Dateofestablishment" id="Date_of_establishment" placeholder="请输入时间">
                                <input type="text" class="layui-input" th:if="${item_sheet == null}" name="Dateofestablishment"  placeholder="请输入时间(例:2019-06-09)">
                            </div>
                        </div>
                    </td>
                    <td><label class="layui-form-label">到期日期:</label></td>
                    <td>
                        <div class="layui-inline">
                            <div class="layui-input-inline">
                                <input type="text" class="layui-input" th:if="${item_sheet != null}" th:value="${item_sheet.MaturityDate}" name="MaturityDate" id="Maturity_Date" placeholder="请输入时间">
                                <input type="text" class="layui-input" th:if="${item_sheet == null}" name="MaturityDate" placeholder="请输入时间(例:2019-06-09)">
                            </div>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td><span>项目来源:</span></td>
                    <td>
                        <select th:if="${Channel_list!=null}" class="layui-select" name="ChannelID">
                            <option value="">--请选择--</option>
                            <option th:each="channellist:${channel_list}" th:selected="${Channel_list.ChannelID} eq ${channellist.ChannelID}" th:value="${channellist.ChannelID}" th:text="${channellist.Corporatename}"></option>
                        </select>
                        <select th:if="${Channel_list==null}" class="layui-select" name="ChannelID">
                            <option value="">--请选择--</option>
                            <option th:each="channellist:${channel_list}" th:value="${channellist.ChannelID}" th:text="${channellist.Corporatename}"></option>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="6" align="center">
                        <button id="sheetsubmit" type="button" class="layui-btn layui-btn-normal layui-btn-radius">查询</button>
                        <!--<button type="reset" class="layui-btn layui-btn-radius">重置</button>-->
                    </td>
                </tr>
            </table>
        </div>
        <div>
            <button onclick="window.location.href='XiangMuAdd'" type="button" class="layui-btn layui-btn-warm layui-btn-radius">新建</button>
            <input name="pageNo" th:value="${page.pageNum}" type="hidden"/><!--//第几页-->
            <input name="total" th:value="${page.total}" type="hidden"/><!--//一共多少行数据-->
        </div>
    </form>
    <div>
        <table class="layui-table" border="1 solid black" cellspacing="0" width="100%" align="center">
            <tr>
                <td>序号</td>
                <td>操作</td>
                <td>项目类型</td>
                <td>项目名称</td>
                <td>项目代码</td>
                <td>项目规模</td>
                <td>项目期限</td>
                <td>项目期限(单位)</td>
                <td>成立日期</td>
                <td>到期日期</td>
                <td>产品分类</td>
                <td>项目来源方</td>
                <td>来源部门方</td>
                <td>来源方对接人A</td>
                <td>来源方对接人B</td>
                <td>来源方对接人C</td>
                <td>产品经理A</td>
                <td>产品经理B</td>
            </tr>
            <tr th:each="sheet:${page.list}" th:object="${sheet}">
                <td th:text="*{ItemID}"></td>
                <td align="center">
                    <a th:href="@{XiangMuUpdate(itemid=*{ItemID})}" >
                        <i class="layui-icon"></i>
                    </a>
                    <a id="deletesheet">
                        <i class="layui-icon"></i>
                    </a>
                    <input type="hidden" name="ItemID" th:value="*{ItemID}">

                </td>
                <td th:text="*{ItemtypeID.ItemTypeName}"></td>
                <td th:text="*{Entryname}"></td>
                <td th:text="*{Projectcode}"></td>
                <td th:text="*{Projectsizelowercase}"></td>
                <td th:text="*{Projectduration}"></td>
                <td th:text="*{TermUnit}"></td>
                <td th:text="*{Dateofestablishment}"></td>
                <td th:text="*{MaturityDate}"></td>
                <td th:text="*{ProductclassificationID.ProductClassificationName}"></td>
                <td th:text="*{ChanneltableID.Corporatename}"></td>
                <td th:text="*{ChanneltableID.ChanneltypeID.ChannelTypeName}"></td>
                <td th:text="*{SourcedockerA}"></td>
                <td th:text="*{SourcedockerB}"></td>
                <td th:text="*{SourcedockerC}"></td>
                <td th:text="*{ProductManagerA}"></td>
                <td th:text="*{ProductManagerB}"></td>
            </tr>
        </table>


    </div>

    </div>
    <div id="demo7" align="center"></div>

    <script type="text/javascript">
        $(function () {
            $("#deletesheet").click(function () {
                var itemid=$("input[name='ItemID']").val();
                //console.log(itemid)
                $.post("/item/XiangMuDelete",{itemID:itemid},function (result) {
                    //console.log(result)
                    if (result=="ok"){
                       layer.confirm('确认删除吗?', {
                            btn: ['确认','取消'] //按钮
                        }, function(){
                            layer.msg("删除成功",{icon:1,time:1000},function () {
                                location.href="queryByItem_sheet";
                            })
                        }, function(){
                            layer.msg('删除失败', {
                                time: 1000, //20s后自动关闭
                            });
                        });
                    }else{
                        layer.msg("删除失败",{icon:1,time:1000},function () {
                            window.history.back(-1);
                        })
                    }
                })

            });

            $("#sheetsubmit").click(function () {
                var data = $("#form").serialize();
                location.href="queryByItem_sheet?"+data;
                //$("#form").attr("action","/item/queryByItem_sheet?"+data).submit();
            })
            //查询ajax开始
            /*$("button[name='sheetbutton']").click(function () {
                var data = $("#form").serialize();
                $.ajax({
                    type:"get",
                    url:"queryByItem_sheetAjax",
                    data:data,
                    success:function (result) {
                        $("#tr2").remove();
                        $.each(result.list,function (i,itemsheet) {
                            $("#sheettable").append("<tr id='tr2'><td text='"+itemsheet.itemID+"'></td><td align='center'><a th:href='@{XiangMuUpdate(itemid="+itemsheet.itemID+")}'><i class='layui-icon'></i></a><a id='deletesheet'><i class='layui-icon'></i></a><input type='hidden' name='ItemID' value='"+itemsheet.itemID+"'></td><td text='"+itemsheet.itemtypeID.itemTypeName+"'></td> <td text='"+itemsheet.entryname+"'></td><td text='"+itemsheet.projectcode+"'></td><td text='"+itemsheet.projectsizelowercase+"'></td><td text='"+itemsheet.projectduration+"'></td><td text='"+itemsheet.termUnit+"'></td><td text='"+itemsheet.dateofestablishment+"'></td><td text='"+itemsheet.maturityDate+"'></td><td text='"+itemsheet.productclassificationID.productClassificationName+"'></td><td text='"+itemsheet.channeltableID.corporatename+"'></td><td text='"+itemsheet.channeltableID.channeltypeID.channelTypeName+"'></td> <td text='"+itemsheet.sourcedockerA+"'></td><td text='"+itemsheet.sourcedockerB+"'></td><td text='"+itemsheet.sourcedockerC+"'></td><td text='"+itemsheet.productManagerA+"'></td><td text='"+itemsheet.productManagerB+"'></td></tr>");
                        })
                    }
                })
                /!*$.get("queryByItem_sheet",data,function (result) {
                    //console.log(result);
                    $("#tr2").close();
                    $.each(result,function (i,itemsheet) {
                        $("#sheettable").append("<tr id='tr2'><td text='"+itemsheet.itemID+"'></td><td align='center'><a th:href='@{XiangMuUpdate(itemid="+itemsheet.itemID+")}'><i class='layui-icon'></i></a><a id='deletesheet'><i class='layui-icon'></i></a><input type='hidden' name='ItemID' value='"+itemsheet.itemID+"'></td><td text='"+itemsheet.itemtypeID.itemTypeName+"'></td> <td text='"+itemsheet.entryname+"'></td><td text='"+itemsheet.projectcode+"'></td><td text='"+itemsheet.projectsizelowercase+"'></td><td text='"+itemsheet.projectduration+"'></td><td text='"+itemsheet.termUnit+"'></td><td text='"+itemsheet.dateofestablishment+"'></td><td text='"+itemsheet.maturityDate+"'></td><td text='"+itemsheet.productclassificationID.productClassificationName+"'></td><td text='"+itemsheet.channeltableID.corporatename+"'></td><td text='"+itemsheet.channeltableID.channeltypeID.channelTypeName+"'></td> <td text='"+itemsheet.sourcedockerA+"'></td><td text='"+itemsheet.sourcedockerB+"'></td><td text='"+itemsheet.sourcedockerC+"'></td><td text='"+itemsheet.productManagerA+"'></td><td text='"+itemsheet.productManagerB+"'></td></tr>");
                    })
                })*!/
            })*/
        });
    </script>



    <script>

        var total=0;
        var pageNum= 0;
        $(function(){
            var data = $("#form").serialize();
            var total=$("input[name='total']").val();
            var pageNum=$("input[name='pageNo']").val();

            layui.use([ 'laypage', 'layer' ], function() {
                var laypage = layui.laypage, layer = layui.layer;
                laypage.render({
                    elem : 'demo7',
                    count : total
                    ,curr: pageNum,
                    limit:2//每页几个,需要修改
                    ,
                    layout : [ 'count', 'prev', 'page', 'next',  'refresh',
                        'skip', ],
                    jump : function(obj,first) {
                        //console.log(obj)
                        if(!first){
                            //do something

                            $("input[name='pageNo']").val(obj.curr);
                            console.log(data)
                            $("#form").attr("action","/item/queryByItem_sheet?"+data).submit();
                            //alert(pageNum);
                        }
                    }
                });
            });
        });


        layui.use('laydate', function(){
            var laydate = layui.laydate;
            //日期范围
            laydate.render({
                elem: '#test6'
                ,range: true
            });
        });
    </script>


</div>
</body>
</html>
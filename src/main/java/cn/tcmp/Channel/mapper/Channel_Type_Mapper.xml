<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.tcmp.Channel.mapper.Channel_Type_Mapper">
    <resultMap id="listMap" type="cn.tcmp.entity.Channel_list" autoMapping="true">
        <id property="ChannelID" column="ChannelID"></id>
        <collection property="ChanneltypeID" resultMap="ctMap"></collection>
    </resultMap>
    <resultMap id="ctMap" type="cn.tcmp.entity.Channel_Type" autoMapping="true">
        <id property="ChannelTypeID" column="ChannelTypeID"></id>
    </resultMap>


    <!--查询所有的渠道类型-->
    <select id="queryAllChannelType" resultType="cn.tcmp.entity.Channel_Type">
        SELECT * FROM `channel_type`
    </select>
    <!--模糊查询渠道-->
    <select id="queryAllChannelList" parameterType="cn.tcmp.entity.Channel_list" resultMap="listMap">
        SELECT * FROM channel_list cl , channel_type ct
        WHERE cl.`ChanneltypeID` = ct.`ChannelTypeID`
        <if test="Corporatename != null">
            AND cl.CorporateName LIKE CONCAT('%',#{Corporatename},'%')
        </if>
        <if test="chaId != null and chaId != ''">
            AND cl.`ChanneltypeID` = #{chaId}
        </if>

    </select>
    <!--查询单个渠道的详情信息-->
    <select id="queryDetailChannelList" parameterType="int" resultMap="listMap">
        SELECT * FROM channel_list cl , channel_type ct
        WHERE cl.`ChanneltypeID` = ct.`ChannelTypeID`
        AND cl.`ChannelID` = #{id}
    </select>
    <!--查询该渠道(公司)下的部门-->
    <select id="queryCompany" parameterType="int" resultType="cn.tcmp.entity.Company_departments_list">
        SELECT * FROM company_departments_list WHERE CompanyID = #{id}
    </select>


</mapper>
